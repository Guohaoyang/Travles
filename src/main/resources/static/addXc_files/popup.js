define(["css!web_old_popup"],function(){var t=jQuery,n={$ui:null,$content:null,$box:null,$title:null,$okBtn:null,$cancelBtn:null,$loadBtn:null,$closeIcon:null,$bottomBtns:null,_uiState:"normal",defaultWidth:400,init:function(){var n=['<div class="qui-popup" style="display:none">',"<div>",'<div class="qui-popup-dt">','<div class="qui-popup-box">','<div class="qui-popup-closeIcon">&nbsp;</div>','<div class="qui-popup-box-title fontYaHei">title</div>','<div class="qui-popup-box-content">',"</div>",'<div class="qui-popup-box-bottom">',"&nbsp;",'<input class="qui-popup-cancelBtn ui_button_cancel" type="button" value="取消" />  ','<input class="qui-popup-okBtn ui_button" type="button" value="确定" />  ','<input class="qui-popup-loadingBtn  ui_button_load" type="button" value="" />  ',"</div>","</div>","</div>","</div>","</div>"].join("");this.$ui=t(n),this.$content=this.$ui.find(".qui-popup-box-content"),this.$box=this.$ui.find(".qui-popup-box"),this.$title=this.$ui.find(".qui-popup-box-title"),this.$okBtn=this.$ui.find(".qui-popup-okBtn"),this.$cancelBtn=this.$ui.find(".qui-popup-cancelBtn"),this.$loadBtn=this.$ui.find(".qui-popup-loadingBtn"),this.$closeIcon=this.$ui.find(".qui-popup-closeIcon"),this.$bottomBtns=this.$ui.find(".qui-popup-box-bottom"),this.$ui.appendTo(document.body)},setWidth:function(t){this.$box.animate({width:t},300)},setUIDefault:function(t){this.$ui[0].className="qui-popup",t.exClassName&&this.$ui.addClass(t.exClassName),t.iframeSrc?this.$content.html('<iframe src="'+t.iframeSrc+'"  scrolling="auto" style="height:'+(t.iframeHeight||300)+'px;"  />'):this.$content.html(t.contentHTML||"&nbsp;"),this.$title.html(t.title||"Title"),this.$box.css("width",t.width||this.defaultWidth),this.$title[t.showTitle===!1?"hide":"show"](),this.$okBtn.val(t.okText||"确定"),this.$cancelBtn.val(t.cancelText||"取消"),this.$bottomBtns[t.showBottomBtns===!1?"hide":"show"](),this.$okBtn[t.showOKBtn===!1?"hide":"show"](),this.$okBtn.removeAttr("data-bn-ipg"),this.$cancelBtn[t.showCancelBtn===!1?"hide":"show"](),this.$cancelBtn.removeAttr("data-bn-ipg"),this.$loadBtn[t.showLoadBtn===!0?"show":"hide"](),this.$loadBtn.removeAttr("data-bn-ipg"),this.$ui.find(".qui-popup-closeIcon").removeAttr("data-bn-ipg"),this.$closeIcon[t.showCloseIcon===!1?"hide":"show"]()},show:function(i){if("hideing"==n._uiState)n.$box.stop(),n.$ui.stop(),this.$ui.css({display:"block",opacity:1}),this.$box.css({top:0,opacity:1}),n._uiState="normal",i.onShow&&i.onShow();else{n._uiState="showing";var o={},e={top:0};t.support.leadingWhitespace&&(o.opacity=1,e.opacity=1),this.$ui.css("display","block").animate(o,200,function(){n.$box.css("top",-30).animate(e,200,function(){n._uiState="normal",i.onShow&&i.onShow()})})}},hide:function(i){if(!i||!i.onBeforeHide||i.onBeforeHide()!==!1){n._uiState="hideing";var o={top:-30},e={};t.support.leadingWhitespace&&(o.opacity=0,e.opacity=0),this.$box.animate(o,200,function(){n.$ui.animate(e,200,function(){n._uiState="normal",n.$ui.css("display","none"),n.$content.html(""),i&&i.onAfterHide&&i.onAfterHide()})})}}};n.init();var i=null,o={show:function(t){return i=t,n.setUIDefault(t),n.$ui.undelegate("click").delegate(".qui-popup-okBtn,.qui-popup-cancelBtn,.qui-popup-closeIcon","click",function(i){if(-1!=this.className.indexOf("qui-popup-closeIcon")||-1!=this.className.indexOf("qui-popup-cancelBtn")){if(t.onBeforeCancel&&!t.onBeforeCancel(i))return;t.onCancel&&t.onCancel()}else if(-1!=this.className.indexOf("qui-popup-okBtn")&&t.onOK&&t.onOK()===!1)return;n.hide(t)}),n.show(t),this},hide:function(){return n.hide(),this},setContent:function(t){return n.$content.html(t),this},getContent:function(){return n.$content[0]},getButtons:function(){return{okBtn:n.$okBtn[0],cancelBtn:n.$cancelBtn[0],loadBtn:n.$loadBtn[0],closeIcon:n.$ui.find(".qui-popup-closeIcon")[0]}},setOption:function(o){var e={width:function(){n.setWidth(o.width)},showTitle:function(){o.showTitle===!1?n.$title.hide():n.$title.show()},showBottomBtns:function(){o.showBottomBtns===!1?n.$bottomBtns.hide():n.$bottomBtns.show()},okText:function(){n.$okBtn.val(o.okText)},cancelText:function(){n.$cancelBtn.val(o.cancelText)},showOKBtn:function(){o.showOKBtn===!1?n.$okBtn.hide():n.$okBtn.show()},showCancelBtn:function(){o.showCancelBtn===!1?n.$cancelBtn.hide():n.$cancelBtn.show()},showLoadBtn:function(){o.showLoadBtn===!1?n.$loadBtn.hide():n.$loadBtn.show()},showCloseIcon:function(){o.showCloseIcon===!1?n.$closeIcon.hide():n.$closeIcon.show()},title:function(){n.$title.html(o.title)},exClassName:function(){n.$ui[0].className="qui-popup "+o.exClassName},contentHTML:function(){o.iframeSrc||n.$content.html(o.contentHTML)},iframeSrc:function(){n.$content.html('<iframe src="'+o.iframeSrc+'"  scrolling="auto" style="height:'+(o.iframeHeight||300)+'px;" />')},iframeHeight:function(){n.$content.children("iframe").css("height",o.iframeHeight)}};for(var s in o)i[s]=o[s],"function"==t.type(e[s])&&e[s]()}};return o});