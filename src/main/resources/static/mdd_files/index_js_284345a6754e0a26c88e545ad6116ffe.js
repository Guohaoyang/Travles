$(document).ready(function(){var t=function(t,e,n){this.$el=t,this.$container=e,this.cur="number"==typeof n?n:this.$el.find(".on").index()||0,this.init()};t.prototype.bindEvent=function(){var t=this;this.$el.on("mouseover","li",function(e){var n=$(e.currentTarget);index=n.index(),t.cur=index,t.display(),qyerUtil.doTrackCode(n.attr("data-bn-ipg"))})},t.prototype.lazyload=function(t){var e=this,n=t?$(t):this.$container.find("ul").eq(this.cur);"false"==n.attr("data-lazyload")&&n.attr("data-lazyload","true").find("li").each(function(t,n){var i=$(n);e.loadImage(i)})},t.prototype.init=function(){this.bindEvent()},t.prototype.display=function(){return this.checkLine().tabShow(this.cur).boxHide().boxShow(this.cur),this},t.prototype.resetClass=function(){return this.$el.find("li").removeClass("on"),this},t.prototype.tabShow=function(t){var e=this.resetClass().$el.find("li").eq(t);return e.addClass("on"),this.setParentByLi(e),this},t.prototype.setParent=function(t,e){var n=this.$el.parent();return n.find(".js-line").text(t).css("left",e),this},t.prototype.setParentByLi=function(t){return this.setParent($.trim(t.find("span").text()),t.offset().left-t.parent().offset().left),this},t.prototype.checkLine=function(){var t=this.$el.parent(),e=t.find(".js-line");return 0==e.length&&t.append('<span class="js-line line"></line>'),this},t.prototype.boxHide=function(){return this.$container.find("ul").removeClass("center"),this},t.prototype.boxShow=function(t){var e=this.$container.find("ul").eq(t);return this.lazyload(e.addClass("center")),this},t.prototype.loadImage=function(t){var e=t,n=e.attr("data-origin");n&&e.css({"background-image":"url("+n+")"})};var e=new t($("#js-tab-1"),$("#js-container-1"));e.display();var n=new t($("#js-tab-2"),$("#js-container-2")),i=new t($("#js-tab-3"),$("#js-container-3")),r=new Date,a=null,r=r.getMonth();i.$el.find("li").each(function(t,e){var n=$.trim($(e).find("span").text()).split("月")[0];n==r+1&&(i.cur=t,a=!0)}),i.checkLine=function(){return this},i.setParentByLi=function(){return this},i.$el.parent().find(".js-line").remove();var s=new t($("#js-tab-4"),$("#js-container-4"));s.display();var o=!0,c=!0;$(window).scroll(function(){var t=$(this).scrollTop(),e=$("#js-tab-2").offset().top,r=$("#js-tab-3").offset().top,a=0;a="BackCompat"==document.compatMode?document.body.clientHeight:document.documentElement.clientHeight,t>=e-a&&t<r-a&&o?(o=!1,n.display()):t>=r-a&&c&&(c=!1,i.display())})}),$(document).ready(function(){var t={get:function(t,e,n,i){return qyerUtil.doAjax({url:t,type:"GET",data:e||{},onSuccess:n||function(){},onError:i||function(){}})},post:function(t,e,n,i){return qyerUtil.doAjax({url:t,type:"POST",data:e||{},onSuccess:n||function(){},onError:i||function(){}})}},e={clearHistory:function(e,n){return t.post("/public.php?action=ajaxcleanbrowse",{},e,n)},searchPlace:function(e,n,i){return t.get("/public.php?action=ajaxplacesearch",{kw:e},n,i)}},n="<p>没有找到相关数据。</p>",i={data:{},state:null,timeout:null,$el:$("#js-search"),get:function(t,n,i){return e.searchPlace(t,n,i)},clear:function(){return e.clearHistory()},saveStorage:function(t,e){return this.data[t]=e,this},checkStorage:function(t){return"undefined"!=typeof this.data[t]&&this.data[t]},listBoxShow:function(){return this.$el.find(".js-search-list").show(),this},listBoxHide:function(){this.$el.find(".js-search-list").hide()},bindEvent:function(){var t=this,e=this.$el.find(".js-search-input");this.$el.on("input onpropertychange",".js-search-input",function(e){var n=$(e.currentTarget);t.loading.call(t,n)}).on("focus",".js-search-input",function(){$.trim(e.val())&&t.loading(e)}).on("keyup",".js-search-input",function(e){var n=t.$el.find(".js-search-list"),i=n.find("li"),r=n.find(".on"),a=i.length,s=r.length?r.index():0;if(0!==a){if(0==r.length)return void i.eq(0).addClass("on");switch(e.keyCode){case 38:r.removeClass("on"),s<=0?s=a-1:--s;break;case 40:r.removeClass("on"),s>=a-1?s=0:++s;break;case 13:var o=r.find("a"),c=o.attr("href"),l=o.attr("data-bn-ipg");qyerUtil.doTrackCode(l);try{window.open(c)}catch(e){window.location.href=c}return}i.eq(s).addClass("on"),e.preventDefault()}}).on("click",".js-search-btn",function(e){var n=t.$el.find(".js-search-list"),i=n.find("li"),r=n.find(".on"),a=i.length,s=r.length?r.index():0;if(a>0){var o=i.eq(s).find("a").attr("href"),c=i.eq(s).find("a").attr("data-name");c&&t.setSearchHistory(o,c);try{window.open(o)}catch(e){window.location.href=o}}}).on("click",".js-search-clear",function(t){var e=$(t.currentTarget);e.text("最近访问：暂无访问记录"),$(".js-search-words").html(""),localStorage.removeItem("searchHistory")}).on("click",".js-search-list ul li a",function(e){var n=e.currentTarget,i=n.getAttribute("data-name");i&&t.setSearchHistory(n.href,i)}),$("body").on("click",function(e){$(e.target).hasClass("js-search-input")||$(e.target).parents(".js-search-list").length>0||t.listBoxHide()})},getTimeout:function(){return this.timeout},clearTimeout:function(){return null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this},abort:function(){return this.state&&this.state.abort&&(this.state.abort(),this.state=null),this},success:function(t){this.checkStorage(this.keyword)===!1&&this.saveStorage(this.keyword,t),t&&t.data&&t.data.html?this.$el.find(".js-search-list").html(t.data.html):this.error(),this.removeLoading(),this.state=null},error:function(t){return this.state&&this.state.readyState>3&&(this.$el.find(".js-search-list").html(n),this.removeLoading()),this},addLoading:function(){return this.$el.find(".js-search-list").html("").addClass("loading"),this},removeLoading:function(){return this.$el.find(".js-search-list").removeClass("loading"),this},loading:function(t){var e=this,n=t,i=$.trim(n.val()),r=e.checkStorage(i);return e.addLoading().listBoxShow(),i?(e.getTimeout()&&e.clearTimeout(),r!==!1?void e.abort().success(r):void(e.keyword==i&&e.state||(e.timeout=setTimeout(function(){e.keyword=i,e.abort(),e.state=e.get(i,$.proxy(e.success,e),$.proxy(e.error,e))},200)))):void e.clearTimeout().abort().error().removeLoading().listBoxHide()},init:function(){this.bindEvent()},setSearchHistory:function(t,e){var n="",i=localStorage.getItem("searchHistory");i?(n=i,i.includes(e)||(n+=","+(t+"|"+e))):n=t+"|"+e,localStorage.setItem("searchHistory",n)}},r={data:localStorage.getItem("searchHistory"),$el:$(".search-history"),render:function(){if(this.data){var t=[],e=this.data.split(","),n=0;n=e.length>=5?5:e.length;for(var i=e.length-1;i>=e.length-n;i--){var r=e[i].split("|")[0],a=e[i].split("|")[1],s="<a href="+r+' class="item js-search-words" target="_blank">'+a+"</a>";t.push(s)}this.$el.find(".words").html(t.join("")),this.$el.find(".aside").html('<a href="javascript:void(0)" class="js-search-clear">清空搜索历史</a>')}else this.$el.find(".aside").html('<a href="javascript:void(0)">最近访问：暂无访问记录</a>')}};r.render(),i.init();var a=null;$("#js-see-all").on("click",function(){var t=$("#js-country-box"),e=$(window.document),n=e.scrollTop(),i=0;t.length>0&&"hidden"!=t.css("display")&&(i=t.offset().top,a&&(clearInterval(a),a=null),a=setInterval(function(){return i<=n+90?void clearInterval(a):void e.scrollTop(n+=90)},15))})});