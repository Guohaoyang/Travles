define(function(){function t(t,i,a,l){this.div_=null,this.map_=t,this.setMap(t),this.card_=l&&!0,this.lableData=i,this.lableConfig={isCustomLable:!1},this.lableConfig=e.extend(this.lableConfig,a)}var e=window.jQuery;return t.prototype=new google.maps.OverlayView,t.prototype.onAdd=function(){var t,i,a,l=this;if(t=l.lableConfig,i=l.lableData,a=document.createElement("DIV"),e(a).addClass("_js_mapOverLayer"),t.isCustomLable)s=t.formatLableCb(i),t.lableClassName&&e(a).addClass(t.lableClassName);else{if(!i.title)return;var s,a,o,n,r;if(s=e.trim(i.title),o=s.length,n=15*o+10,n>120&&(n=120),e(a).css({width:n+"px"}),this.card_||e(a).css({"z-index":"-1",border:"1px solid #999",backgroundColor:"#fff","text-align":"center","float":"left",width:n+"px","max-width":"150px"}),!a)return}a.style.position="absolute",a.innerHTML=s,l.div_=a,r=this.getPanes(),r.overlayMouseTarget.appendChild(l.div_)},t.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},t.prototype.draw=function(){if(this.div_){var t,i,a,l,s,o,n;if(l=this.lableConfig,s=this.lableData,a=this.div_,this.card_&&e(a).parent().parent().css({"z-index":899}),t=this.getProjection(),i=t.fromLatLngToDivPixel(s.latlng),o=i.x+11,n=i.y-31,l.isCustomLable){var r,d;r=e(a).width(),d=e(a).height(),o=i.x-60,n=i.y-parseInt(d)-0}a.style.left=o+"px",a.style.top=n+"px"}},t});