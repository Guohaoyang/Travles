<!DOCTYPE html>
<!-- saved from url=(0055)http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/? -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../static/layui/css/layui.css"  media="all"> 
<style type="text/css">
.gm-style .gm-style-mtc label,.gm-style .gm-style-mtc div {
	font-weight: 400
}
</style>
<style type="text/css">
.gm-control-active>img {
	box-sizing: content-box;
	display: none;
	left: 50%;
	pointer-events: none;
	position: absolute;
	top: 50%;
	transform: translate(-50%, -50%)
}

.gm-control-active>img:nth-child(1) {
	display: block
}

.gm-control-active:hover>img:nth-child(1),.gm-control-active:active>img:nth-child(1)
	{
	display: none
}

.gm-control-active:hover>img:nth-child(2),.gm-control-active:active>img:nth-child(3)
	{
	display: block
}
#qx{
	margin-left: 500px;
	margin-top: 50px;
}
</style>
<link type="text/css" rel="stylesheet" href="../static/addXingChen_files/css">
<style type="text/css">
.gm-ui-hover-effect {
	opacity: .6
}

.gm-ui-hover-effect:hover {
	opacity: 1
}
</style>
<style type="text/css">
.gm-style .gm-style-cc span,.gm-style .gm-style-cc a,.gm-style .gm-style-mtc div
	{
	font-size: 10px;
	box-sizing: border-box
}
</style>
<style type="text/css">
@media print {
	.gm-style .gmnoprint,.gmnoprint {
		display: none
	}
}

@media screen {
	.gm-style .gmnoscreen,.gmnoscreen {
		display: none
	}
}
</style>
<style type="text/css">
.gm-style-pbc {
	transition: opacity ease-in-out;
	background-color: rgba(0, 0, 0, 0.45);
	text-align: center
}

.gm-style-pbt {
	font-size: 22px;
	color: white;
	font-family: Roboto, Arial, sans-serif;
	position: relative;
	margin: 0;
	top: 50%;
	-webkit-transform: translateY(-50%);
	-ms-transform: translateY(-50%);
	transform: translateY(-50%)
}
</style>
<style type="text/css">
@charset "UTF-8"; 

[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not
	(.ng-hide-animate ){
	display: none !important;
}

ng\:form {
	display: block;
}
</style>

<meta name="keywords" content="布拉格">
<meta name="description" content="穷游网行程助手">
<meta name="google-site-verification"
	content="DVVM1p1HEm8vE1wVOQ9UjcKP--pNAsg_pleTU5TkFaM">
<title>添加行程 - 旅行计划</title>
<link rel="shortcut icon" href="http://www.qyer.com/favicon.ico">
<link rel="stylesheet"
	href="../static/addXingChen_files/style.d6f9d547e6b1f73a5fddb4835352743e.css">

<script type="text/javascript" src="../static/js/jquery-3.3.1.js"></script>


<link type="text/css" rel="stylesheet"
	href="../static/addXingChen_files/inputAutocomplete.css">



<link type="text/css" rel="stylesheet"
	href="../static/addXingChen_files/QuiTip.css">

<link type="text/css" rel="stylesheet"
	href="../static/addXingChen_files/slidconfirm.css">
<script type="text/javascript" charset="utf-8" async=""
	data-requirecontext="_" data-requiremodule="web_qui_quigmap"
	src="../static/addXingChen_files/QuiGmap.js"></script>
<script type="text/javascript" charset="utf-8" async=""
	data-requirecontext="_" data-requiremodule="web_qui_quigmap_infobox"
	src="../static/addXingChen_files/infobox.js"></script>



<style type="text/css">
.gm-style {
	font: 400 11px Roboto, Arial, sans-serif;
	text-decoration: none;
}

.gm-style img {
	max-width: none;
}
</style>

<style type="text/css">
@
-webkit-keyframes _gm8126 { 0% {
	-webkit-transform: translate3d(0px, 0px, 0);
	-webkit-animation-timing-function: ease-out;
}
50%
{
-webkit-transform
:
 
translate3d
(0px
,
-20
px
,
0);
-webkit-animation-timing-function
:
 
ease-in
;
 
}
100%
{
-webkit-transform
:
 
translate3d
(0px
,
0
px
,
0);
-webkit-animation-timing-function
:
 
ease-out
;
 
}
}
</style>

<script type="text/javascript" charset="utf-8" async=""
	data-requirecontext="_" data-requiremodule="web_old_textarea"
	src="../static/addXingChen_files/textArea.js"></script>
<link type="text/css" rel="stylesheet"
	href="../static/addXingChen_files/textArea.css">
</head>
<body class="ngdialog-open"
	style="background-image: url(&quot;//common3.qyerstatic.com/plan/desktop/edit3/img/background.png&quot;);">

	<div ng-app="planner" class="ng-scope">
		<div ng-controller="Planner" class="ng-scope">
			<div id="wrapper" class="">
				<header planner-header=""
					style="background-image: url(&quot;//common3.qyerstatic.com/plan/desktop/edit3/img/background.png&quot;);">
					<div ng-controller="PlannerHeaderController" class="inner ng-scope"
						id="pdf-header"
						style="background-image: url(&quot;//common3.qyerstatic.com/plan/desktop/edit3/img/header.png&quot;);">
						<div class="title">
							<a class="logo" href="http://plan.qyer.com/" target="_blank"
								data-bn-ipg="Planv3-tool-LOGO"><i class="iconfont"></i></a>
							<!-- ngIf: !editing -->
							<div class="text ng-scope" ng-if="!editing">
								<span ng-click="startEditing()" class="ng-binding">wu3322的捷克行程</span>
								<div class="black-tip bottom">点击修改标题</div>
							</div>
							<!-- end ngIf: !editing -->
							<!-- ngIf: editing -->
						</div>
					
						<ul class="edit">
							<li><a
								href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#">上一步</a></li>
							<li><a
								href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#">重做</a></li>
						</ul>
						<div class="links">
							
							<div class="sep"></div>
							
							<div class="sep"></div>
						
							
						</div>
						<div class="export">
							<a
								href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
								ng-click="toggleExport($event)">保存啊<span class="triangle"></span></a>
							<div id="export-selector" class="dropdown" style="">
								<ul>
									<li class="with-icon icon-word" ng-click="exportWord($event)">
										导出word行程单</li>
									<li class="with-icon icon1"
										ng-click="closeExport($event, true)"><a class="link"
										href="http://plan.qyer.com/planapi.php?action=downexcel&amp;id=18543779"
										target="_blank" ng-click="showAppAd()">送签专用行程单</a></li>
									<li class="with-icon icon2" ng-click="exportPDF($event)">PDF详细行程单</li>
									<li class="with-icon icon3"><a class="link"
										href="http://app.qyer.com/plan/" target="_blank"
										data-bn-ipg="Planv3-tool-export-mobile">手机查看行程单</a></li>
								</ul>
							</div>
							<div class="dropdown dropdown-pdf" style="">
								<form
									action="http://plan.qyer.com/export.php?action=generatepdf"
									method="post" target="_blank" class="ng-pristine ng-valid">
									<input type="hidden" name="routeid" value="18543779"><input
										type="hidden" name="trip[]" value="1"><input
										type="hidden" name="memo" value="1">
									<h3>
										导出PDF选项<span>基础行程是最基本的元素。此外，你可以选择：</span>
									</h3>
									<a
										href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
										class="close" ng-click="closeExport($event)">关闭</a>
									<ul style="height: 400px; overflow-y: auto;">
										<li><input type="checkbox" ng-model="cover" name="cover"
											value="1" checkbox="" checked=""
											class="ng-pristine ng-untouched ng-valid"
											style="display: none;"><a
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											class="checkbox checked"></a><span>封面</span></li>
										<li><input type="checkbox" ng-model="calendar"
											name="calendar" value="1" checkbox="" checked=""
											class="ng-pristine ng-untouched ng-valid"
											style="display: none;"><a
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											class="checkbox checked"></a><span>日历表行程</span></li>
										<li><input type="checkbox" ng-model="tripAll" checkbox=""
											checked="" disabled=""
											class="ng-pristine ng-untouched ng-valid"
											style="display: none;"><a
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											class="checkbox disabled checked"></a><span>行程</span>
										<ul>
												<li><input type="checkbox" ng-model="tripBasic"
													name="trip[]" value="1" checkbox="" checked="" disabled=""
													class="ng-pristine ng-untouched ng-valid"
													style="display: none;"><a
													href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
													class="checkbox disabled checked"></a><span>基础行程</span></li>
												<li><input type="checkbox" ng-model="tripMap"
													name="trip[]" value="2" checkbox="" checked=""
													class="ng-pristine ng-untouched ng-valid"
													style="display: none;"><a
													href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
													class="checkbox checked"></a><span>每日地图</span></li>
												<li><input type="checkbox" ng-model="tripInfo"
													name="trip[]" value="8" checkbox="" checked=""
													class="ng-pristine ng-untouched ng-valid"
													style="display: none;"><a
													href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
													class="checkbox checked"></a><span>景点详细介绍</span></li>
												<li><input type="checkbox" ng-model="allmap"
													name="allmap" value="1" checkbox="" checked=""
													class="ng-pristine ng-untouched ng-valid"
													style="display: none;"><a
													href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
													class="checkbox checked"></a><span>全程地图</span></li>
												<li id="b_tripZworld"><input type="checkbox"
													ng-model="tripZworld" name="trip[]" value="4" checkbox=""
													checked="" class="ng-pristine ng-untouched ng-valid"
													style="display: none;"><a
													href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
													class="checkbox checked"></a><span>最世界产品</span></li>
											</ul></li>
										<li id="b_cost"><input type="checkbox" ng-model="cost"
											name="cost" value="1" checkbox="" checked=""
											class="ng-pristine ng-untouched ng-valid"
											style="display: none;"><a
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											class="checkbox checked"></a><span>行程花费</span></li>
										<!-- <li><input type="checkbox" ng-model="memo" name="memo" value="1" checkbox checked><span>备忘录</span></li> -->
										<li><input type="checkbox" ng-model="pageshow"
											name="pageshow" value="1" checkbox="" checked=""
											class="ng-pristine ng-untouched ng-valid"
											style="display: none;"><a
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											class="checkbox"></a><span>每日行程分页显示</span></li>
									</ul>
									<div class="control">
										<a
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											class="button" data-bn-ipg="Planv3-PDF-close"
											ng-click="closeExport($event)">取消</a>
										<!-- <a href="#" class="primary button" ng-click="submit($event)">导出</a> -->
										<a
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											class="button primary" data-bn-ipg="Planv3-PDF-nextstep"
											ng-click="showPdfModify()">下一步</a>
									</div>
								</form>
							</div>
							<div class="dropdown-word">
								<form action="http://plan.qyer.com/exportword.php" method="post"
									target="_blank" class="ng-pristine ng-valid">
									<input type="hidden" name="routeid" value="18543779">
									<h3>
										导出Word选项<span></span>
									</h3>
									<a
										href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
										class="close" ng-click="closeWord($event)">关闭</a>
									<table width="100%">
										<tbody>
											<tr>
												<td>餐饮</td>
												<td><input type="text" name="food"
													value="酒店含早 中式午餐 中式晚餐"></td>
											</tr>
											<tr>
												<td>住宿</td>
												<td><input type="text" name="hote"
													value="三星级酒店标准双人间（含早餐)"></td>
											</tr>
										</tbody>
									</table>
									<div class="control">
										<a
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											class="button" ng-click="closeWord($event)">取消</a><a
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											class="primary button" ng-click="submit($event)">导出</a>
									</div>
								</form>
							</div>
							<div class="mask-pdf"></div>
							<div class="pdf-modify dropdown" style="">
								<h3>点击修改行程标题和封面图</h3>
								<a
									href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
									class="close" ng-click="closeExport($event)">关闭</a>
								<div class="modify-cont" id="modify-cont">
									<div class="modify-bg">
										<!-- ngIf: !pdfTitlEditing -->
										<span ng-if="!pdfTitlEditing"
											class="modify-title ng-binding ng-scope"
											data-bn-ipg="Planv3-PDF-cover-tittle"
											ng-click="startPdfEditTitle($event)">wu3322的捷克行程</span>
										<!-- end ngIf: !pdfTitlEditing -->
										<!-- ngIf: pdfTitlEditing -->
										<div class="modify-img">
											<form id="upload-cover-form-pdf"
												enctype="multipart/form-data" method="post"
												action="http://plan.qyer.com/upload.php?action=singleupload"
												class="ng-pristine ng-valid">
												<img src="../static/addXingChen_files/w1080"><img
													src="../static/addXingChen_files/pdf_bg.png">
												<div class="imgupload">
													<a
														href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?##"
														class="iconfont"><input id="upload-cover-field-pdf"
														type="file" name="Filedata"
														data-bn-ipg="Planv3-PDF-cover-image"></a>
												</div>
												<!-- ngIf: imgLoadStatus == "loading" -->
												<input type="hidden" name="type" value="plan"><input
													type="hidden" name="plan_id" value="18543779">
											</form>
										</div>
									</div>
								</div>
								<div class="control">
									<a
										href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
										class="button" data-bn-ipg="Planv3-PDF-cover-laststep"
										ng-click="exportPDF()">上一步</a><a
										href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
										class="primary button" data-bn-ipg="Planv3-PDF-cover-export"
										ng-click="submitPdf($event)">导出</a>
								</div>
							</div>
						</div>
						<div class="insurancelayer">
							<div class="insurance_main">
								<!-- ngIf: isSchengen -->
								<!-- ngIf: !isSchengen -->
								<div ng-if="!isSchengen" class="insurance_top ng-scope">
									<h3>旅行保险销量Top3</h3>
									<span>在外旅行可能会面临多种突发情况，购买旅行保险可以多一份保障与安心</span>
								</div>
								<!-- end ngIf: !isSchengen -->
								<ul class="insurance_list">
									<!-- ngRepeat: item in insuranceData -->
								</ul>
							</div>
							<div class="close" data-bn-ipg=""></div>
						</div>
						<div class="app-ad">
							<div class="main">
								<div class="phone">
									
								</div>
								<div class="close"></div>
							</div>
						</div>
					</div>
				</header>
				
				<div class="fixed-wrapper">
				
				
					<!-- 第几天 -->
					<section class="planner-day-list scroll_top" style="width: 270px;">
						<!-- <div class="inner-header"></div> -->
						<div ng-controller="DayListController" class="inner ng-scope">
							<!-- 天数 -->
							<div id="tss">  
						
								<input type="hidden" id="ts" th:each="g:${list}" th:value='${g.days}' >
								
							</div>
							<!-- ngIf: days.length < 50 -->
							<div class="addlast ng-scope" onclick="addLast()">								
								<span class="iconfont"></span>增加一天
								<input type="hidden" id="tidx" th:each="g:${list}" th:value='${g.tid}' >
							</div>
							<!-- <div class="addlast ng-scope" onclick="addLast_d()">								
								<span ></span>-删除一天
								<input type="hidden" id="tidx" th:each="g:${list}" th:value='${g.tid}' >
							</div> -->
							<!-- end ngIf: days.length < 50 -->
						</div>
						<!-- <div class="inner-footer"></div> -->
					</section>

					<!-- 32232323 -->
					<section class="planner-recommends">
						<div class="inner ng-scope"
							ng-controller="PlannerRecommendsController"
							ng-class="{true: &#39;with-path&#39;}[!!service.selectedTraffic]">
							<div class="recommends-header ng-scope"
								ng-controller="RecommendsHeaderController">
								<a class="city ng-binding"
									href="" id="cit"
									onclick="cc()"
									data-bn-ipg="Planv3-right-city-change" th:each="g:${list}"  th:text='${g.end}'>郑州</a>
								<div class="city-options" style="display: none;">
								<!-- 	<ul>
										
										<li ng-repeat="city in service.getAllCities()"
											ng-click="changeCity(city)" class="ng-binding ng-scope" th:each="g:${list}"  th:text='${g.start}'></li>
										
										<li ng-repeat="city in service.getAllCities()"
											ng-click="changeCity(city)" class="ng-binding ng-scope" th:each="g:${list}"  th:text='${g.end}'></li>
										
									</ul> -->
									<input type="text" placeholder="输入城市名称">
									<!-- ngIf: service.selectedCity && top5 -->
									<p class="top5 ng-scope"
										ng-if="service.selectedCity &amp;&amp; top5">
										<span>下一站TOP5：</span>
										<!-- ngRepeat: city in top5 -->
										
										
									</p>
									<!-- end ngIf: service.selectedCity && top5 -->
									<!-- ngIf: !service.selectedCity || !top5 -->
								</div>
								<div class="search" ng-show="mode == &#39;standard&#39;">
									<input type="text" placeholder=""
										ng-keydown="keyHandler($event)"><a
										href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
										class="icon close" ng-click="closeSearch($event)">关闭</a>
								</div>
							</div>
							<div class="recommends-tabs ng-scope"
								ng-controller="RecommendsTabsController"
								ng-show="mode == &#39;standard&#39; &amp;&amp; service.selectedCity"
								style="top: 60px;">
								<ul class="mainmenu"
									ng-class="{true:&#39;search-state&#39;}[service.recommendType == &#39;search&#39;]">
									<li class="hold-position" 	style="text-align:left;"><a
										href=""
										ng-click="changeTab(0, $event)"
										data-bn-ipg="Planv3-right-menu-route" class="active"><i class="iconfont"></i>游玩</a></li>
									<li  style="text-align:left;"
										data-help-index="2" data-help-direction="top"
										data-help-content="选中游玩后，勾选美食即可" data-help-left-offset="-20"><a
										href=""
										ng-click="changeTab(1, $event);doTrackCode((service.recommendType == &#39;search&#39; ? &#39;Planv3-right-search-poi&#39; : &#39;Planv3-right-menu-poi&#39;));"
										><i class="iconfont"></i>--<span
											class="triangle"></span></a>
									<div>
											<ul class="poi-filter">
												
												<li><span
													ng-click="poi[&#39;32&#39;] = !poi[&#39;32&#39;];changePoiFilter(&#39;sight&#39;);">景点</span></li>
											</ul>
										</div></li>
									<li class="hold-position" style="text-align:left;"
										data-help-index="3" data-help-direction="top"
										data-help-content="选中后，可搜索酒店" data-help-step="1"
										data-help-left-offset="-16"><a
										href=""
										ng-click="changeTab(2, $event);doTrackCode((service.recommendType == &#39;search&#39; ? &#39;Planv3-right-search-hotel&#39; : &#39;Planv3-right-menu-hotel&#39;));"><i
											class="iconfont"></i>--<!--em class="evt-1012"></em-->
											<span class="triangle"></span></a></li>
									<li data-help-index="4" data-help-direction="top"
										data-help-content="选中城际交通后，输入起始城市即可" data-help-step="1"><a
										href=""
										ng-click="changeTab(3, $event)"
										data-bn-ipg="Planv3-right-menu-trans"><i class="iconfont"></i>酒店</a></li>
										<li data-help-index="4" data-help-direction="top"
										data-help-content="选中城际交通后，输入起始城市即可" data-help-step="1"><a
										href=""
										ng-click="changeTab(3, $event)"
										data-bn-ipg="Planv3-right-menu-trans"><i class="iconfont"></i>--</a></li>
									<li style="display:none"><a
										href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
										ng-click="changeTab(4, $event)"
										data-bn-ipg="Planv3-right-menu-collection"><i
											class="iconfont"></i>--<span class="triangle"></span></a></li>
									
								</ul>
							</div>
							<div class="recommends-body ng-scope"
								ng-controller="RecommendsBodyController"
								ng-show="mode == &#39;standard&#39;">
								<div class="inner recommend-pois ng-scope"
									ng-controller="RecommendPoisController"
									ng-if="service.selectedCity &amp;&amp; page == &#39;pois&#39;">
									<!-- ngIf: service.recommendType == 'search' -->
									<div class="container">
									<div id="xqq">	
										<article ng-repeat="poi in pois" ng-if="!loading" id="xq"
											class="ng-scope">
											<div class="image"
												ng-click="viewDetails($event, (poi.catetypeid == 1000 ? poi.pid : poi.id), poi.catetypeid == 1000, 1)">
												<div class="image__lmimg"
													style="background-image:url(https://pic.qyer.com/album/user/866/0/SU9TQhoFZQ/index/300_200),url(//common3.qyerstatic.com/plan/mobile/shared/img/default_pic/400x300/poi_poi.jpg)"></div>
												<!-- ngIf: poi.comment&&poi.comment.length -->
												<div class="comment ng-scope"
													ng-if="poi.comment&amp;&amp;poi.comment.length">
													<div class="poitext">
														<img src="../static/addXingChen_files/120" alt=""><span
															class="ng-binding">鲜衣少年郎</span>
														<p class="ng-binding">这附近人很多，很乱，小偷超猖獗，切记小心。</p>
													</div>
												</div>
												
											</div>
											
											<div class="title">
												<div class="inner">
													<h1 ng-click="viewDetails($event, (poi.catetypeid == 1000 ? poi.pid : poi.id), poi.catetypeid == 1000, 2)" ng-class="{true:'double-line'}[poi.catetypeid == 1000]" class="ng-binding">金鹭鸵鸟园</h1>
													
													<h2 ng-click="viewDetails($event, (poi.catetypeid == 1000 ? poi.pid : poi.id), poi.catetypeid == 1000, 2)" ng-if="poi.catetypeid != 1000" class="ng-binding ng-scope">&nbsp;</h2>
													
													<a href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#" class="iconfont ng-scope" ng-if="poi.lat &amp;&amp; poi.lng &amp;&amp; poi.catetypeid != 1000" ng-click="showInMap($event, poi)" data-bn-ipg="Planv3-right-poi-map"></a>
													
												</div>
											</div>
											
											<div class="summary ng-scope" ng-if="poi.catetypeid != 1000">
												<div class="score">
													
													<span class="icon ng-scope star"
														ng-repeat="star in [1,2,3,4,5]"
														ng-class="{&#39;true&#39;:&#39;empty-star&#39;,&#39;false&#39;:&#39;star&#39;}[poi.score &lt; ($index + 1)]"></span>
													
												</div>
												<div class="percentage ng-binding">21%的人选择</div>
											</div>
											<!-- end ngIf: poi.catetypeid != 1000 -->
											<!-- ngIf: poi.catetypeid != 1000 -->
											<div class="hours ng-binding ng-scope"
												ng-if="poi.catetypeid != 1000">平均游玩时间：1小时</div>
											
										
											<a href="javascript:void(0)" ng-if="poi.catetypeid != 1000"
												ng-click="addToPlan($event, poi);doTrackCode((service.recommendType == &#39;search&#39; ? &#39;Planv3-right-search-addpoi&#39; : &#39;Planv3-right-poi-addtoplan&#39;))"
												class="add ng-scope" ng-mouseenter="addHoverHandler($event)"
												ng-mouseleave="addOutHandler($event)"><span
												class="iconfont"></span><span class="text ng-binding">添加到行程</span></a>
											
										</article>
									</div>	
								
										
									</div>
								</div>
								
							</div>
							<!-- ngIf: mode == 'map' -->
						</div>
					</section>
				</div>
				<div class="scroll-wrapper scroll_top"
					style="left: 303px; width: 462px; height: 482px;">
					<div class="planner-day-details-wrapper"></div>
					<section class="planner-day-details" style="width: 462px;">
						<div ng-controller="DayDetailsController" class="inner ng-scope"
							style="padding-bottom: 0px;">
							<!-- ngIf: loading -->
							<div class="details-header">
								<h2>
									<a id="header-date-picker"
										
										data-help-index="10" data-help-direction="right"
										data-help-content="" class="bullink" th:each="g:${list}"  th:text='${g.startTime}'>填写日期</a>
								</h2>
								<div
									class="cities clearfix ng-pristine ng-untouched ng-valid ng-isolate-scope ui-sortable"
									ng-model="day.city_list" ui-sortable="citySortableOptions">
									<!-- ngRepeat: city in day.city_list -->
									<div class="item ng-scope" ng-repeat="city in day.city_list"
										ng-class="getCityClass($last, (city.tagid &lt;= 0))"
										data-id="39" data-name="布拉格" style="">
										<span  class="ng-binding"  id="m1" th:each="g:${list}"  th:text='${g.start}'>布拉格</span>
										 <div class="delimiter"
											ng-mouseover="showRecommendTraffic($event)"
											ng-mouseout="hideRecommendTraffic($event)">&gt;</div>
										<!-- <a
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											class="close" ng-click="removeCity($index)">删除城市</a>  -->
									</div>
									<!-- end ngRepeat: city in day.city_list -->
									<div class="item ng-scope last"
										ng-repeat="city in day.city_list"
										ng-class="getCityClass($last, (city.tagid &lt;= 0))"
										data-id="11771" data-name="郑州" style="">
										<span  class="ng-binding" th:each="g:${list}"  th:text='${g.end}'>郑州</span>
										<!-- <div class="delimiter"
											ng-mouseover="showRecommendTraffic($event)"
											ng-mouseout="hideRecommendTraffic($event)">&gt;</div> -->
										
									</div>
									<!-- end ngRepeat: city in day.city_list -->
									<!-- ngIf: !day.city_list || day.city_list.length === 0 -->
									<!-- ngIf: day.city_list.length < 10 -->
									<div class="item add-city ng-scope"
										ng-if="day.city_list.length &lt; 10">
										<span ng-click="addCity($event)"
											ng-show="day.city_list&amp;&amp;day.city_list.length&lt;10"
											data-help-index="1" data-help-direction="right"
											data-help-content="">+增加城市</span><input
											class="input-city" placeholder="请输入城市..." type="text">
									</div>
									<!-- end ngIf: day.city_list.length < 10 -->
								</div>
								<div class="recommend-traffic">
									<p>
										<!-- ngIf: recommendTraffics[0].distance || recommendTraffics[0].distance == '0' -->
										<!-- ngIf: recommendTraffics[0].percent -->
									</p>
									<ul>
										<!-- ngRepeat: traffic in recommendTraffics -->
									</ul>
								</div>
								<!-- <div class="recommend-traffic" ng-if="recommendTraffics.length==0"><p>坐标位置缺失。</p></div> -->
								<div class="controls"
									ng-class="{true:&#39;mini&#39;}[service.mode == &#39;map&#39;]"
									style="">
									<!-- ngIf: total_hours == 0 -->
									<!-- ngIf: total_hours > 0 -->
									<div id="js_total_hoursBgCss" class="hours ng-binding ng-scope"
										ng-if="total_hours &gt; 0"
										style="background-position:0px -82px">2h</div>
									<!-- end ngIf: total_hours > 0 -->
									<!-- ngIf: total_hours >= 11 -->
									<!-- ngIf: total_hours >= 7 && total_hours < 11 -->
									<!-- ngIf: total_hours < 7 -->
									<div class="status ng-scope" ng-if="total_hours &lt; 7">建议</div>
									<!-- end ngIf: total_hours < 7 -->
									<a class="edit iconfont" href="" ></a>
										
										 
										 
										
								</div>
							</div>
							<!-- ngIf: (!service.place_list || service.place_list.length === 0) && !loading_details -->
							<!-- ngIf: (!service.place_list || service.place_list.length === 0) && loading_details -->
							<!-- ngIf: service.place_list.length > 0 -->
							<div class="details-body ng-scope"
								ng-if="service.place_list.length &gt; 0">
								
						
								<div
									class="places ng-pristine ng-untouched ng-valid ng-isolate-scope ui-sortable"
									ng-model="service.place_list"
									ui-sortable="placeSortableOptions">
									<!-- ngRepeat: place in service.place_list -->
									<div class="place-wrapper ng-scope" id="addxs" ng-repeat="place in service.place_list">
										<!-- 11111111111111111111111 -->
										 <div class="details-empty ng-scope" id="hm" ng-if="(!service.place_list || service.place_list.length === 0) &amp;&amp; !loading_details">还未安排行程</div> 
										<!-- <div><a class="place"
											ng-click="viewDetails($event, place, &#39;view&#39;, (place.type == 2 &amp;&amp; place.pid &gt; 0))"
											href="http://plan.qyer.com/trip/V2UJa1FjBzJTZ1I4CmsNNw/edit/?#"
											data-bnb="0" target="_blank"
											ng-mouseenter="service.startPinAnimation($event, place.id)"
											ng-mouseleave="service.stopPinAnimation($event, place.id)"
											ng-class="{true:&#39;active&#39;}[place.active]"><div
												class="pin poi">
												
												
												<div class="iconfont ng-binding"
													ng-class="{false: &#39;black&#39;}[place.tripmode == 7  || place.sameday]"
													ng-bind-html="getCardIcon(place)"></div>
												
												<div class="dotted ng-scope" style="bottom: -18px;"
													ng-if="!$last"></div>
												
											</div>
											<h3 ng-if="place.type !== 3"
												ng-class="{true: &#39;one-line&#39;}[place.starthours &lt; 0 &amp;&amp; place.endhours &lt; 0 &amp;&amp; !place.spend &amp;&amp; place.cateid!=1000]"
												class="ng-scope one-line">
												
												<span ng-bind-html="place.cn_name || place.en_name"
													class="ng-binding">二七纪念塔</span>
												
											</h3>
											
											<span class="delete iconfont" ng-click="deletePlace($event, $index)"></span>
										
											<div data-id="727197724" data-type="1" data-index="0"
												class="edit iconfont ng-scope" slide-dropdown="placeOptions"
												ng-if="$index == 0" data-help-index="8|11"
												data-help-step="2|1" data-help-direction="right|right"
												></div>
											</a>
										
										<div class="traffic ng-scope"
											ng-if="!$last &amp;&amp; traffic_list.length &gt; 0 &amp;&amp; !traffic_list[$index].empty"
											ng-click="viewPath($index)"
											ng-class="{active: viewPathIndex == $index, disabled: place.type == 3 &amp;&amp; place.tripmode != 4 &amp;&amp; place.tripmode != 7 &amp;&amp; service.place_list[$index + 1].type == 3 &amp;&amp; service.place_list[$index + 1].tripmode != 4 &amp;&amp; service.place_list[$index + 1].tripmode != 7}"
											data-bn-ipg="Planv3-mid-p2p-click" data-help-index="6"
											data-help-direction="right"
											data-help-content="大力点这里哦。（位置缺失的情况下，无法查询交通方案）"
											data-help-left-offset="-20">
											<div class="icon ng-binding"></div>
											
										</div>
										</div>  -->
										
												
										<!-- 11111111111111111111111 -->
										
									</div>
									
									
									
								</div>
								
								<div class="hotel-tip ng-scope" slide-dropdown="addHotelOptions"
									ng-if="!loading_details &amp;&amp; !has_hotels">
									<div class="icon"></div>
									<span data-bn-ipg="Planv3-mid-nohotel-add">今天还没安排</span>
								</div>
								<!-- end ngIf: !loading_details && !has_hotels -->
							</div>
							<!-- end ngIf: service.place_list.length > 0 -->
							
						</div>
					</section>
					<div class="planner-day-notes">
						<div ng-controller="DayNotesController" class="ng-scope">
							<!-- ngRepeat: note in notes -->
						</div>
					</div>
				</div>
				<div class="slider-wrapper">
					<section class="planner-slider ng-scope"
						ng-controller="PlannerSliderController">
						<!-- ngIf: service.slideName === 'editNote' -->
						<!-- ngIf: service.slideName === 'editHotel' -->
						<!-- ngIf: service.slideName === 'viewPOI' -->
						<!-- ngIf: service.slideName === 'viewHotel' -->
						<!-- ngIf: service.slideName === 'viewTraffic' -->
						<!-- ngIf: service.slideName === 'viewRoute' -->
					</section>
				</div>
			</div>
			
		</div>
	</div>

	
	
	


	<div id="ui-datepicker-div"
		class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>
	<input type="text" id="dp1553142923808" class="hasDatepicker"
		style="display: none;">
	<div class="qui-inputAutocomplete" style="display:none;">
		<ul class="qui-inputAutocomplete-ul">
			<li class="disableDefalut">loading ...</li>
		</ul>
	</div>
	<div class="qui-inputAutocomplete"
		style="width: 100px; top: 143px; left: 391px; display: none;"></div>
	<button id="__dotarckcodebutton__" style="display:none;"
		data-bn-ipg="Planv3-mid-poi-delete">dotarckcodebutton</button>
	<div class="qui-tip "
		style="z-index: 1500; text-align: center; top: 0px; display: none; opacity: 0; transform: scale(0.1, 1);">
		<div class="qui-tip-box" style="margin-left: 0px; margin-right: 0px;">
			<span class="qui-tip-text fontYaHei" style="padding-left: 34px;"><span
				class="qui-tip-textIcon" style="display: block;"></span><span
				class="qui-tip-textContent">添加成功！</span></span>
		</div>
	</div>
	
	
	<!-- //确定取消框框框框框 -->
	<div class="qui-slidConfirm" id="qx_s"
		style="margin-left:500px; top: 190px; display: none;">
		<div class="qui-slidConfirm-title">
			<span class="qui-slidConfirm-text">确认要删除这一地点？</span>
		</div>
		<div class="qui-slidConfirm-bottom">
			<input type="button"
				class="qui-slidConfirm-cancelBtn ui_button_cancel" onclick="qqx()" value="取消">
			<input type="button" class="qui-slidConfirm-okBtn ui_button" onclick="qqxs()"
				value="确定">
		</div>
	</div>
<!-- 473728b -->
<script>
	var cit=$("#cit").text();
	//alert(cit)
	function cc()
	{
		//alert(11);
		$("#xq").html('');
	}
	
	
	function formatterDateTime() {
		  var date=new Date()
		  var month=date.getMonth() + 1
		        var datetime = date.getFullYear()
		                + ""// "年"
		                + (month >= 10 ? month : "0"+ month)
		                + ""// "月"
		                + (date.getDate() < 10 ? "0" + date.getDate() : date
		                        .getDate())
		                + ""
		                + (date.getHours() < 10 ? "0" + date.getHours() : date
		                        .getHours())
		                + ""
		                + (date.getMinutes() < 10 ? "0" + date.getMinutes() : date
		                        .getMinutes())
		                + ""
		                + (date.getSeconds() < 10 ? "0" + date.getSeconds() : date
		                        .getSeconds());
		        return datetime;
		    }

		  $.ajax({
		    type: 'post',
		    url: 'http://route.showapi.com/268-1',
		    dataType: 'json',
		    data: {
		        "showapi_timestamp": formatterDateTime(),
		        "showapi_appid": '89950', //这里需要改成自己的appid
		        "showapi_sign": '4a9cc4d52e9c41daaf29ba576d2e0716',  //这里需要改成自己的应用的密钥secret
		        "keyword":cit,
		        "proId":"",
		        "cityId":"",
		        "areaId":"",
		        "page":""

		    },

		    error: function(XmlHttpRequest, textStatus, errorThrown) {
		        alert("操作失败!");
		    },
		    success: function(result) {
		    	var obj = JSON.stringify(result);
		    	var str ="";
		    	$("#xqq").html('');  
		         /* alert(obj[0].showapi_res_body); */
		         //console.log(result.showapi_res_body.pagebean.contentlist)
		        for(var i = 0;i<(result.showapi_res_body.pagebean.contentlist).length;i++){
		         	var c=result.showapi_res_body.pagebean.contentlist[i];
		         	var p;
		         	if(c.picList.length<1)
		         	{
		         		p='//common3.qyerstatic.com/plan/mobile/shared/img/default_pic/400x300/poi_poi.jpg';
		         	}
		         	else
		         	{
		         		p=c.picList[0].picUrl;
		         	}
		         	//console.log('fffffffffff'+p);
		         	//景点DIV
		        	str+="<article ng-repeat='poi in pois' ng-if='!loading' id='xq' class='ng-scope'>"
		        		+"<div class='image'>"
		        			+"<div class='image__lmimg' id='p"+i+"' style='background-image:url("+p+"),url(//common3.qyerstatic.com/plan/mobile/shared/img/default_pic/400x300/poi_poi.jpg)'>"
		        			+"</div>"
		        				+"<div class='comment ng-scope' ng-if='poi.comment&amp;&amp;poi.comment.length'>"
								
								+"<div class='poitext'>"
									
								 +"   <span class=''ng-binding' id='a"+i+"'>"+c.areaName+"&nbsp&nbsp&nbsp</span>"
								+"	<p class='ng-binding'  id='s"+i+"'>"+c.summary+"</p>"
								+"</div>"
							+"</div>"
		        			+"</div>"
		        		+"<div class='title'>"
							+"<div class='inner'>"
								+"<h1  class='ng-binding' id='cns"+i+"'>"+c.name+"</h1>"
								+"<h2  class='ng-binding ng-scope'>&nbsp;</h2>" 
							+"</div>"
						+"</div>"
						+"<div class='summary ng-scope' ng-if='poi.catetypeid != 1000'>"
						+"	<div class='score'>"
								
							+"	<span class='icon ng-scope star' ng-repeat='star in [1,2,3,4,5]'"
									
							+"ng-class='{&#39;true&#39;:&#39;empty-star&#39;,&#39;false&#39;:&#39;star&#39;}[poi.score &lt; ($index + 1)]'></span>"
							+"<span class='icon ng-scope star' ng-repeat='star in [1,2,3,4,5]' ng-class='{'true':'empty-star','false':'star'}[poi.score < ($index + 1)]'></span>"	
							+"</div>"
							+"<div class='percentage ng-binding'>21%的人选择</div>"
						+"</div>"
						+"<div class='hours ng-binding ng-scope'"
						+"ng-if='poi.catetypeid != 1000'>平均游玩时间：1小时</div>"
						+"<a href='javascript:void(0)' ng-if='poi.catetypeid != 1000'"
						+"	class='add ng-scope' ng-mouseenter='addHoverHandler($event)'"
						+"	ng-mouseleave='addOutHandler($event)' onclick='addjs("+i+")'><span"
						+"	class='iconfont'></span><span class='text ng-binding'>添加到行程</span></a>"
		        		+"</article>"
		        }
		        $("#xqq").html(str); 
		         
		    }
		});
		  
		 var num=0;
		//追加添加的内容
		  
		
</script> 

<!-- 第几天拼接 -->
 <script>
    var a=$("#ts").val();
	function csh(){  
		//alert(1);
		
		var end=$("#cit").text();
		var time_s=$("#header-date-picker").text();
		
		var str="";
		  str+="<ul ui-sortable='sortableOptions' ng-model='days'"
			  +"class='ng-pristine ng-untouched ng-valid ng-isolate-scope ui-sortable' id = 'daynum'>";  
		 for(i=1;i<=a;i++)
		{			
				   str+="<li ng-repeat='day in days'"
					 +"data-help-direction='right'"
					  +"class='ng-scope' id='d"+i+"' onclick='dddd("+i+")'>"
						+"<h2 class='ng-binding'>D"+i+"</h2>"
					+"<div class='text-container'>"
						+"<div>"
						+"	<p class='date ng-binding'>"+time_s+"</p>"
						+"<p class='places' title=''>"
								
								+"<span ng-repeat='city in day.city_list'"
								+"	class='ng-binding ng-scope' id='cnss"+i+"'>"+end+"</span>"
								
							+"</p></div></div>"
						
					
					+"<div class='more iconfont' slide-dropdown='dropdownOptions'"
						+"data-index='0'></div></li>";	 	
			
		}
			  str+="</ul>"; 
			  $("#tss").html(str);
			  //设置第一天的值
			  var m=$("#cnss1").text();
			  
			  var e=$("#m1").text();
			  var s=e+">"+m;
			  
			   $("#cnss1").text(s);  
}
	//调用初始加载方法
	$(function(){	
		
		csh();	
		$("#d1").attr("class","ng-scope active");
	});
	<!-- //增加一天  点击事件-->
	function addLast()
	{
		var aa=$("#tidx").val()
		if(a==7)
		{
			layer.msg('最大天数，添加失败！');
			return;
		}
		else{
		$.ajax({
	        type: "post",
	        url: "upt",
	        data: {tid:aa},
	        dataType: "json",
	        success: function(data){
	         	if(data==1){
	         		a++;
	         		csh();
	         		layer.msg('添加成功！');
	         	}
	        }
	    }); }
		
	}
</script>

<script src="../static/layui/layui.js" charset="utf-8"></script>

<script>
/* 这是个数组layui  分页需要定义成全局的 */
layui.use(['laydate','layer'], function(){  
	  layer = layui.layer;
});

</script>
<!-- 天数点击 -->
<script>
	function xunhuan(obj){
		for(var i=0;i<obj.length;i++)
    	{
    		
    		str+="<div id='nu"+i+"'> <a class='place' href='#' data-bnb='0'"
    				
					+"ng-mouseenter='service.startPinAnimation($event, place.id)'"
					+"ng-mouseleave='service.stopPinAnimation($event, place.id)'"
					+"ng-class='{true:&#39;active&#39;}[place.active]'>"
					+"<div class='pin poi'>"
						
						
					+"	<div class='iconfont ng-binding' ng-bind-html='getCardIcon(place)'></div>"
							
							
						
					+"	<div class='dotted ng-scope' style='bottom: -18px;' ng-if='!$last' ></div>"
							
						
					+"</div>"
					+"<h3 class='ng-scope one-line'>"							
					+"	<span class='ng-binding' id='n_sd"+i+"'>"+obj[i].xname+"</span>"												
					+"</h3>"
					
					+"<span class='delete iconfont' onclick='delete2("+i+")' ></span>"
					
				+"</a>"
					
				
				+"<div class='traffic ng-scope' data-bn-ipg='Planv3-mid-p2p-click' >"
				
				+"	<div class='icon ng-binding'></div>"
				+"<span ng-if='traffic_list[$index].distance' class='ng-binding ng-scope'>68.32km</span>"	
				+"</div>";
			
    	} 	  
	}
</script>
<script>
	var djt=1;   //当前天数 全局用
	var tid=$("#tidx").val();
	var str ="";
	function dddd(num)
	{
		var c = $("#daynum li").length;
		var d=num;
		djt=d;
		//设置点击颜色
	    for(var i=1;i<=c;i++)
		{
			$("#d"+i).removeClass('active');
			if(d==i)
			{
				$("#d"+i).addClass('active');	
			}
		}
		
		
	    $.ajax({
            type: "post",
            url: "Alacon",
            data: {days:djt,tid:tid},
            dataType: "json",
            success: function(data){
            	str='';
            	$("#hm").attr('style','display:none');
            	xunhuan(data);  
            	$("#addxs").html(str);
            }
            
         });   
	}
	
	//点击添加数据库111
	
	var tid=$("#tidx").val(); //景点ID
	var d;                    //当前第几天
	function addjs(n)
	{
					
		var a=n
		var pic=$("#p"+a).css("backgroundImage").replace('url(','').replace(')','');
		//var pic=$("#p"+a).attr('style')  
		var strs= new Array();
		strs=pic.split(",");
		var pics=strs[0];                  //图片
		var areaName=$("#a"+a).text();     //金水区
		var summary=$("#s"+a).text();      //景点介绍
		var v=$("#cns"+a).text();          //景点名称
		
		
		 $.ajax({
            type: "post",
            url: "addcon",
            data: {xname:v,xpic:pics,xcon:summary,days:djt,tid:tid},
            dataType: "json",
            success: function(data){
             	if(data==1){
             		layer.msg('添加成功！');
             		$.ajax({
                        type: "post",
                        url: "Alacon",
                        data: {days:djt,tid:tid},
                        dataType: "json",
                        success: function(data){
                        	var obj = JSON.stringify(data);
                        	//alert(obj);
                        	$("#hm").attr('style','display:none');
                        	$("#addxs").html('');
                        	str='';
                        	xunhuan(data);
                        	$("#addxs").html(str);
                        }
                     });   
             	}
            }
        });    
	}
	var n;
	var name;
	var tid_ds;
	function delete2(a)
	{
		$("#qx_s").attr('style','display:block')
		n=a;
		name=$("#n_sd"+a).text();
		$.ajax({
            type: "post",
            url: "sdid",
            data: {days:djt, xname:name},
            dataType: "json",
            success: function(data){
            	tid_ds=data;        
            }
        });
	}
	function qqxs()
	{
		$("#qx_s").attr('style','display:none');
		
		$.ajax({
            type: "post",
            url: "del_xid",
            data: {xid:tid_ds},
            dataType: "json",
            success: function(data){
            	layer.msg('取消成功！'); 
            	$.ajax({
                    type: "post",
                    url: "Alacon",
                    data: {days:djt,tid:tid},
                    dataType: "json",
                    success: function(data){
                    	str='';
                    	$("#hm").attr('style','display:none');
                    	xunhuan(data);  
                    	$("#addxs").html(str);
                    }
                    
                 });   
            }
        });
	}
	function qqx()
	{
		$("#qx_s").attr('style','display:none');
	}
</script>
</body>
</html>