require(["ta/rollupAmdShim"],function(a){a.install(["popunder/popunder-manager","popunder/utils","popunder/context/base-context","popunder/chrome-new-window-strategy","popunder/chrome-two-click-new-window-strategy","popunder/console-strategy","popunder/ff-new-window-strategy","popunder/ie-new-window-strategy","popunder/safari-new-window-strategy","popunder/context/attraction-review","popunder/context/default","popunder/context/flights","popunder/context/geo-hotels","popunder/context/hotel-detail","popunder/context/hotelhighlight","popunder/context/ib-abandoner-survey","popunder/context/smartdeals","popunder/context/smarter_travel","popunder/context-store","popunder/context-manager","popunder/contextual-provider"],["utils/browserutils","ta/util/Cookie","ta/Core/TA.Event","ta/Core/TA.Store","ta/Core/TA.Record","ta/util/Object","ta/Core/TA.Store","ta","ta/Core/TA.Store","ta","ta/util/Object","ta/Core/TA.LocalStorage","ta","ta/Core/TA.Event"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"content_helper",files:{js3:{src:{popunder:{"context-store":1,"ff-new-window-strategy":1,"chrome-new-window-strategy":1,utils:1,"context-manager":1,context:{"base-context":1,"default":1,smartdeals:1,hotelhighlight:1,smarter_travel:1,"ib-abandoner-survey":1,"hotel-detail":1,"geo-hotels":1,flights:1,"attraction-review":1},"safari-new-window-strategy":1,"contextual-provider":1,"ie-new-window-strategy":1,"popunder-manager":1,"console-strategy":1,"chrome-two-click-new-window-strategy":1}}}},_:{baseUrl:"/"}})};
define("popunder/popunder-manager",["vanillajs","api-mod","ta/Browser","utils/browserutils","ta/util/Cookie","ta/Core/TA.Event","ta/Core/TA.Store","ta/Core/TA.Record","ta/util/Error"],function(p,m,f,a,k,i,u,s,h){var v=1000*60*60*24;var o,l,g=false;function t(y,w,x){o=y;l=w;if(!o||!l||window.name==="POPUNDER_CONTENT_FRAME"){return}!x&&b()}function r(x){if(f.isIE10Metro()){return"ie10metro"}if(!x.target){return false}if(window.noPopClass&&m.elementOrParentMatches(x.target,function(y){return m.hasClass(y,window.noPopClass)})){return"no_cpu_class"}var w=x.target.onclick;if(w&&w.toString&&w.toString().match(/window\.open/g)){return"onclick_script"}if(m.elementOrParentMatches(x.target,function(y){return y.target&&y.tagName==="A"})){return"has_target"}return false}function d(x,y){var w,z;if(x==="unload"&&a.chrome){return"Chrome_unload"}if(g&&x==="unload"&&!window.isTakeOver){return"paused"}if(!k.canSet()){return"failed_cookie_check"}w=k.readRaw("CommercePopunder");if(w&&(w!=="SuppressUnload"||x!=="click")){return"already_popped"}if(window.location.protocol==="http:"&&u.has("httpsDestination")){return"http_to_https"}if(x==="click"){z=r(y);if(z){return z}}if(typeof blockPU!=="undefined"&&blockPU){return"block_pu"}return false}function e(w){w=w||window.event;if(!g&&w.target&&m.elementOrParentMatches(w.target,function(x){return x.tagName==="A"})){g=true;setTimeout(c,1000)}}function c(){g=false}function b(){m.addEvent(document,"click",e);m.addEvent(document,"click",j.bind(null,"click"));m.addEvent(window,"beforeunload",j.bind(null,"unload"))}function n(x){var w=new Date(new Date().getTime()+v);k.write("CommercePopunder",x,w)}function j(x,z){var D,B,w;if(!o){return}w=l.getContentInfo();if(!w){return}D=d(x,z);if(D){return}var A=k.readRaw(k.cookiePIDName);try{if(window.localStorage){localStorage.setItem("CommercePopunder.timeStamp",new Date().getTime())}}catch(y){h.record(y,"commercePopunder - localStorage after before pop",null,{},"WARN")}B={name:"CommercePopunder",url:w.url,width:w.size.width,height:w.size.height,event:z};i.fireEvent("onPopunderBlur");try{localStorage.setItem("CommercePopunder.fallbackRelativeUrl",u.retrieve("popunder.geoId")?"/PricefinderPopunder?content=PCB&geo="+u.retrieve("popunder.geoId"):"/PricefinderPopunder?content=PCB")}catch(C){}if(o.spawn(B)){q(w.url);n("SuppressAll*"+new Date().getTime())}else{h.record(null,"commercePopunder - past rules, no pop",null,{},"WARN");if(x==="unload"){n("SuppressUnload")}}if(A){k.setPIDCookie(A)}}function q(C){try{if(!C){return}var y="CommerceEnhancedPopunder";if(C.match(/AlsoViewedLB/)){y="AlsoViewedLB"}else{var w=C.match(/RuleBasedPopunder\?Rule=\d+/);if(w){var z=w[0].match(/\d+/);y="RuleBasedPopunder_"+z[0]}}var x="OpenWindow";var B=u.retrieve("checkrates.HWtracking");if(B){x="OpenWindow_"+B;u.remove("checkrates.HWtracking")}s.trackEventOnPage("CommercePopunder",x,y,"popunder",true)}catch(A){h.record(A,"CommercePopunder - trackPopunder")}}return{init:t}});
define("popunder/utils",["vanillajs","ta/util/Object","ta/Core/TA.Store"],function(f,b,g){function c(){return{height:window.outerHeight||document.documentElement.clientHeight,width:window.outerWidth||document.documentElement.clientWidth,left:window.screenLeft||window.screenX||0,top:window.screenTop||window.screenY||0}}function d(){var h=(ta.page&&ta.page.hasDates&&ta.page.hasDates("STAYDATES"))||(ta.widgets&&ta.widgets.calendar&&ta.widgets.calendar.hasPageDates());if(ta.ab&&ta.ab.roomlist&&ta.ab.roomlist.getData){var i=ta.ab.roomlist.getData();if(i&&i.summary){h=!!(i.summary.checkin&&i.summary.checkOut)}}return h}function a(){var h=window.modelGeoId;var j=window.modelLocId;if(ta.ab&&ta.ab.roomlist&&ta.ab.roomlist.getData){var i=ta.ab.roomlist.getData();if(i&&i.summary){h=i.summary.geoId;j=i.summary.locationId}}if(!h){h=g.retrieve("popunder.geoId")}if(!j){j=g.retrieve("popunder.locId")}return{geoId:h,locId:j}}function e(i){var h=Array.prototype.slice.call(arguments,1);return i?b.merge.apply(null,h):h[0]}return{getWindowInfo:c,isDated:d,getLocationModel:a,mergeIfTrue:e}});
define("popunder/context/base-context",["mixins/mixin","mixins/Events","popunder/utils","vanillajs"],function(b,a,e,d){var c=function(f){return b(this,new a("activate"),f)};c.prototype={init:function(){},isActive:function(){return true},generateUrl:function(){return"/PricefinderPopunder?content=PCB"},generateModel:function(){return{hasDates:e.isDated()}},servletName:"PricefinderPopunder?PCB"};return c});
define("popunder/chrome-new-window-strategy",["vanillajs","popunder/utils"],function(vanilla,Utils){var PDF_BASE64_DATA="data:application/pdf;base64, JVBERi0xLjMKJf////8KMSAwIG9iago8PCAvQ3JlYXRvciAoUHJhd24pCi9Qcm9kdWNlciAoUHJhd24pCj4+CmVuZG9iagoyIDAgb2JqCjw8IC9UeXBlIC9QYWdlcwovQ291bnQgMQovS2lkcyBbNSAwIFJdCj4+CmVuZG9iagozIDAgb2JqCjw8IC9UeXBlIC9DYXRhbG9nCi9QYWdlcyAyIDAgUgovTmFtZXMgNyAwIFIKPj4KZW5kb2JqCjQgMCBvYmoKPDwgL0xlbmd0aCA3Ngo+PgpzdHJlYW0KL0RldmljZVJHQiBjcwowLjAwMCAwLjAwMCAwLjAwMCBzY24KL0RldmljZVJHQiBDUwowLjAwMCAwLjAwMCAwLjAwMCBTQ04KcQpRCgplbmRzdHJlYW0KZW5kb2JqCjUgMCBvYmoKPDwgL1R5cGUgL1BhZ2UKL1BhcmVudCAyIDAgUgovTWVkaWFCb3ggWzAgMCA2MTIuMCA3OTIuMF0KL0NvbnRlbnRzIDQgMCBSCi9SZXNvdXJjZXMgPDwgL1Byb2NTZXQgWy9QREYgL1RleHQgL0ltYWdlQiAvSW1hZ2VDIC9JbWFnZUldCj4+Cj4+CmVuZG9iago2IDAgb2JqCjw8IC9TIC9KYXZhU2NyaXB0Ci9KUyA8ZmVmZjAwNjEwMDcwMDA3MDAwMmUwMDYxMDA2YzAwNjUwMDcyMDA3NDAwMjgwMDI3MDA0ZjAwNmUwMDY1MDAyMDAwNmQwMDZmMDA2ZDAwNjUwMDZlMDA3NDAwMjAwMDcwMDA2YzAwNjUwMDYxMDA3MzAwNjUwMDJlMDAyZTAwMmUwMDI3MDAyOT4KPj4KZW5kb2JqCjcgMCBvYmoKPDwgL1R5cGUgL05hbWVzCi9KYXZhU2NyaXB0IDggMCBSCj4+CmVuZG9iago4IDAgb2JqCjw8IC9OYW1lcyBbKHh5enp5KSA2IDAgUl0KPj4KZW5kb2JqCnhyZWYKMCA5CjAwMDAwMDAwMDAgNjU1MzUgZiAKMDAwMDAwMDAxNSAwMDAwMCBuIAowMDAwMDAwMDcxIDAwMDAwIG4gCjAwMDAwMDAxMjggMDAwMDAgbiAKMDAwMDAwMDE5MCAwMDAwMCBuIAowMDAwMDAwMzE2IDAwMDAwIG4gCjAwMDAwMDA0NzAgMDAwMDAgbiAKMDAwMDAwMDY0OSAwMDAwMCBuIAowMDAwMDAwNzAxIDAwMDAwIG4gCnRyYWlsZXIKPDwgL1NpemUgOQovUm9vdCAzIDAgUgovSW5mbyAxIDAgUgo+PgpzdGFydHhyZWYKNzQ1CiUlRU9GCg";var chromeHoldingWindowInit=function(){var intervalId=null,isPopunderHandlers=[],stnData={height:null,left:null,top:null,url:null,width:null},windowOpeningDone=false,addPopunderHandler=function addPopunderHandler(handler){isPopunderHandlers.push(handler)},setStnData=function setStnData(data){if(!data){return}["left","top","height","width","url"].forEach(function(key){stnData[key]=data[key]||stnData[key]||null})},wrapupStn=function wrapupStn(closeWhenInvalid){if(!stnData.url||!isPopunder()){if(closeWhenInvalid){window.close()}return}window.clearInterval(intervalId);window.moveTo(stnData.left,stnData.top);window.resizeTo(stnData.width,stnData.height);window.location.href=stnData.url},blurHandler=function blurHandler(event){window.removeEventListener("blur",blurHandler);isPopunderHandlers.push=function(handler){handler()};isPopunderHandlers.forEach(isPopunderHandlers.push)},focusHandler=function focusHandler(event){window.removeEventListener("focus",focusHandler);windowOpeningDone=true;window.addEventListener("blur",blurHandler);_startStateChecking()},isPopunder=function isPopunder(){return windowOpeningDone&&!window.document.hasFocus()&&(window.opener&&window.opener.document.hasFocus()||window.openerCopy&&window.openerCopy.document.hasFocus())},_startStateChecking=function startStateChecking(){_startStateChecking=function startStateChecking(){};intervalId=window.setInterval(function(){if(!isPopunder()){return}wrapupStn()},100)};window.resizeTo(0,navigator.userAgent.indexOf("Macintosh")!==-1?0:1);window.moveTo(9999,9999);window.addEventListener("focus",focusHandler);window.setTimeout(function(){_startStateChecking()},10000);window.setTimeout(function(){window.wrapupStn(true)},60000);window.addPopunderHandler=addPopunderHandler;window.setStnData=setStnData;window.wrapupStn=wrapupStn},chromeHoldingWindowInitTechnique="<script>("+chromeHoldingWindowInit.toString()+")()<\/script>";function executeTechnique(name,url,windowLeft,windowTop,windowHeight,windowWidth){var popupWindow=window.open("about:blank",name,"scrollbars=yes,resizeable=yes,height=1,width=1,top=9999,left=9999"),popupDoc,clearPdfAlert=function(){window.clearTimeout(timeoutId);iframe.src="about:blank";window.document.body.removeChild(iframe)},iframe,timeoutId;if(!popupWindow){return null}popupDoc=popupWindow.document.open();popupDoc.write(chromeHoldingWindowInitTechnique);popupDoc.close();popupWindow.setStnData({url:url,left:windowLeft,top:windowTop,height:windowHeight,width:windowWidth});_updateHolder(popupWindow);iframe=_injectPdf();popupWindow.addPopunderHandler(function(){clearPdfAlert();popupWindow.wrapupStn()});timeoutId=window.setTimeout(clearPdfAlert,2000);return popupWindow}function _updateHolder(popupWindow){eval(function(p,a,c,k,e,d){e=function(c){return c};if(!"".replace(/^/,String)){while(c--){d[c]=k[c]||c}k=[function(e){return d[e]}];e=function(){return"\\w+"};c=1}while(c--){if(k[c]){p=p.replace(new RegExp("\\b"+e(c)+"\\b","g"),k[c])}}return p}("0.2=0.1;0.1=3;",4,4,"popupWindow|opener|openerCopy|null".split("|"),0,{}))}function _injectPdf(){var iframeDoc=void 0,pdfContainer=void 0,iframe=void 0,pdfData=void 0;iframe=window.document.createElement("iframe");iframe.style.display="none";window.document.body.appendChild(iframe);iframeDoc=iframe.contentDocument;pdfContainer=iframeDoc.createElement("div");iframeDoc.body.appendChild(pdfContainer);pdfData=PDF_BASE64_DATA+Math.floor(900*Math.random())+100;pdfContainer.innerHTML='<object data="'+pdfData+'"></object>';return iframe}function _spawn(options){var popunder,wInfo=Utils.getWindowInfo();try{popunder=executeTechnique(options.name,options.url,wInfo.left+(wInfo.width-options.width)/2,wInfo.top+(wInfo.height-options.height)/2,options.height,options.width)}catch(e){popunder=null}return popunder}return{spawn:_spawn}});
define("popunder/chrome-two-click-new-window-strategy",["vanillajs","popunder/utils"],function(d,f){var b=function(){var q=null,g=[],j={height:null,left:null,top:null,url:null,width:null},h=false,l=function l(s){g.push(s)},r=function r(s){if(!s){return}["left","top","height","width","url"].forEach(function(t){j[t]=s[t]||j[t]||null})},k=function k(s){if(!j.url||!p()){if(s){window.close()}return}window.clearInterval(q);window.moveTo(j.left,j.top);window.resizeTo(j.width,j.height);window.location.href=j.url},m=function m(s){window.removeEventListener("blur",m);g.push=function(t){t()};g.forEach(g.push)},n=function n(s){window.removeEventListener("focus",n);h=true;window.addEventListener("blur",m);o()},p=function p(){return h&&!window.document.hasFocus()&&window.opener.document.hasFocus()},o=function i(){o=function s(){};q=window.setInterval(function(){if(!p()){return}k()},100)};window.resizeTo(0,navigator.userAgent.indexOf("Macintosh")!==-1?0:1);window.moveTo(9999,9999);window.addEventListener("focus",n);window.setTimeout(function(){o()},10000);window.setTimeout(function(){window.wrapupStn(true)},60000);window.addPopunderHandler=l;window.setStnData=r;window.wrapupStn=k},c="<script>("+b.toString()+")()<\/script>";function e(h,g,l,m,n,k){var j=window.open("about:blank",h,"scrollbars=yes,resizeable=yes,height=1,width=1,top=9999,left=9999"),i;if(!j||!j.document){return null}i=j.document.open();i.write(c);i.close();if(!j.setStnData||!j.addPopunderHandler||!j.wrapupStn){j.close();return null}j.setStnData({url:g,left:l,top:m,height:n,width:k});j.addPopunderHandler(function(){j.wrapupStn()});return j}function a(h){var g,i=f.getWindowInfo();try{g=e(h.name,h.url,i.left+(i.width-h.width)/2,i.top+(i.height-h.height)/2,h.height,h.width)}catch(j){g=null}return g}return{spawn:a}});
define("popunder/console-strategy",["vanillajs"],function(a){return{spawn:function(b){console.log("Spawning popunder with options: ",b);return true}}});
define("popunder/ff-new-window-strategy",["vanillajs","popunder/utils"],function(a,b){return{spawn:function(d){var c,e=b.getWindowInfo(),f=function(){c.blur();window.focus();try{c.moveTo(e.left+(e.width-d.width)/2,e.top+(e.height-d.height)/2);c.resizeTo(d.width,d.height)}catch(h){}};window.open("javascript:window.blur();","_self","");c=window.open(d.url,d.name,"toolbar=1,location=1,directories=1,status=1,menubar=1,resizable=1,copyhistory=1,scrollbars=1,width=1,height=1,left="+(e.left+e.width)+",top="+(e.top+e.height));if(!c){return false}var g=new Promise(function(i,h){window.onfocus=function(){i(window.document.hasFocus())};setTimeout(f,100)});g.then(function(h){if(!h){c.onload=f()}window.onfocus=""});return c}}});
define("popunder/ie-new-window-strategy",["vanillajs","popunder/utils"],function(a,b){return{spawn:function(d){var c,e=b.getWindowInfo();c=window.open(d.url,d.name,"toolbar=1,location=1,directories=1,status=1,menubar=0,resizable=1,copyhistory=1,scrollbars=1,width=1,height=1,left="+(e.left+e.width)+",top="+(e.top+e.height));if(!c){return false}c.blur();window.focus();window.document.focus();if(window.event&&window.event.srcElement){window.event.srcElement.focus()}c.moveTo(e.left+(e.width-d.width)/2,e.top+(e.height-d.height)/2);c.resizeTo(d.width,d.height);return c}}});
define("popunder/safari-new-window-strategy",["vanillajs","popunder/utils"],function(a,b){return{spawn:function(e){var c,f=b.getWindowInfo(),d=window.name;document.domain=window.location.hostname;c=window.open(e.url,e.name,"toolbar=1,location=1,directories=1,status=1,menubar=1,resizable=1,copyhistory=1,scrollbars=1,width=1,height=1,left="+(f.left+f.width)+",top="+(f.top+f.height));if(!c){return false}c.blur();window.focus();if(!d){d=window.location.host.replace(/[-.]/g,"");window.name=d}window.open("",d);window.focus();c.moveTo(f.left+(f.width-e.width)/2,f.top+(f.height-e.height)/2);c.resizeTo(e.width,e.height);return c}}});
define("popunder/context/attraction-review",["popunder/context/base-context","popunder/utils","vanillajs"],function(c,b,a){return new c({isActive:function(){return window.pageServlet==="Attraction_Review"},generateUrl:function(d){return"/SmartDeals-g"+d.geoId+"-d"+d.locId},generateModel:function(){return b.mergeIfTrue(this.isActive(),c.prototype.generateModel(),b.getLocationModel())},servletName:"HotelsNearSD"})});
define("popunder/context/default",["popunder/context/base-context","popunder/utils","vanillajs"],function(c,b,a){return new c({isActive:function(){return ta&&ta.localStorage&&ta.localStorage.enabled},generateUrl:function(d){return d.geoId?"CpmForward?geo="+d.geoId:"/CpmForward"},generateModel:function(){return b.mergeIfTrue(this.isActive(),c.prototype.generateModel(),b.getLocationModel())},servletName:"CpmForward"})});
define("popunder/context/flights",["ta","popunder/context/base-context","popunder/utils","vanillajs"],function(a,d,c,b){return new d({isActive:function(){return window.pageServlet==="CheapFlightsSearchResults"&&a.retrieve("flights.suppressExitUnit")!==true},generateModel:function(){return c.mergeIfTrue(this.isActive(),d.prototype.generateModel(),{customParams:a.retrieve("flights.exitUnitParams")})},generateUrl:function(e){return"/FlightsExitUnit?"+e.customParams},servletName:"FlightsExitUnit"})});
define("popunder/context/geo-hotels",["popunder/context/base-context","popunder/utils","vanillajs","ta/Core/TA.Store"],function(c,b,a,d){return new c({isActive:function(){return window.pageServlet==="Hotels"&&d.retrieve("popunder.geoId")},generateUrl:function(e){return"/SmartDeals-g"+e.geoId},generateModel:function(){return b.mergeIfTrue(this.isActive(),c.prototype.generateModel(),b.getLocationModel())},servletName:"SmartDeals"})});
define("popunder/context/hotel-detail",["popunder/context/base-context","popunder/utils","vanillajs"],function(c,b,a){return new c({isActive:function(){return window.pageServlet==="Hotel_Review"},generateUrl:function(d){return"/Hotel_Review-s1-g"+d.geoId+"-d"+d.locId},generateModel:function(){return b.mergeIfTrue(this.isActive(),c.prototype.generateModel(),b.getLocationModel())},servletName:"HotelHighlight"})});
define("popunder/context/hotelhighlight",["popunder/context/base-context","popunder/utils","vanillajs"],function(c,b,a){return new c({isActive:function(){return window.pageServlet==="HotelHighlight"},generateUrl:function(d){return"/Hotels-g"+d.geoId},generateModel:function(){return b.mergeIfTrue(this.isActive(),c.prototype.generateModel(),b.getLocationModel())},servletName:"Hotels"})});
define("popunder/context/ib-abandoner-survey",["ta","popunder/context/base-context","popunder/utils","vanillajs"],function(a,e,d,c){var b=false;return new e({init:function(){var f=this;if(window.pageServlet==="HotelBookingRoomSelectionHtml"){a.addEvent(window,"beforeunload",function(){b=true;f.emit("activate")})}},isActive:function(){return b},generateModel:function(){return d.mergeIfTrue(this.isActive(),e.prototype.generateModel(),d.getLocationModel())},generateUrl:function(f){return"/PricefinderPopunder?content=BOOKING_SURVEY"}})});
define("popunder/context/smartdeals",["popunder/context/base-context","popunder/utils","vanillajs"],function(c,b,a){return new c({isActive:function(){return window.pageServlet==="SmartDeals"},generateUrl:function(d){return"/Hotels-g"+d.geoId},generateModel:function(){return b.mergeIfTrue(this.isActive(),c.prototype.generateModel(),b.getLocationModel())},servletName:"Hotels"})});
define("popunder/context/smarter_travel",["popunder/context/base-context","popunder/utils","vanillajs"],function(c,b,a){return new c({isActive:function(){return(window.pageServlet==="Hotels"||window.pageServlet==="Hotel_Review")&&b.isDated()},generateModel:function(){return b.mergeIfTrue(this.isActive(),c.prototype.generateModel(),b.getLocationModel())},generateUrl:function(d){return"/PricefinderPopunder?content=SMARTER_TRAVEL&g="+d.geoId},servletName:"SmarterTravelLander"})});
define("popunder/context-store",["vanillajs","popunder/context/base-context","popunder/context/default","popunder/context/attraction-review","popunder/context/geo-hotels","popunder/context/hotel-detail","popunder/context/ib-abandoner-survey","popunder/context/flights","popunder/context/smarter_travel","popunder/context/smartdeals","popunder/context/hotelhighlight"],function(g,k,f,i,e,a,b,d,j,h,c){return{ATTRACTION_REVIEW:i,DEFAULT:f,FALLBACK:new k(),GEO_HOTELS:e,HOTEL_DETAIL:a,IB_ABANDONER_SURVEY:b,FLIGHTS:d,SMARTER_TRAVEL:j,SMART_DEALS:h,HOTEL_HIGHLIGHT:c}});
define("popunder/context-manager",["vanillajs","ta/util/Object","ta/Core/TA.LocalStorage","popunder/context-store"],function(f,d,o,a){var b="pu_context";function c(s){var u=a[s],r=u.generateModel(),t=e();if(s===t.type){return d.merge({},t,r)}else{return d.merge({type:s},r)}}function e(){var r;if(o.enabled&&o.canUseSession()){r=o.getSessionKey(b);r=n(r)?r:null}return r||{type:"FALLBACK",geoId:null,locId:null}}function n(r){return !!(r&&a[r.type])}function k(r){if(o.enabled&&o.canUseSession()){o.setSessionKey(b,r)}}function j(s,r){k(d.merge(c(s),r))}function q(){var s=e(),r=a[s.type];return r.generateUrl(s)}function p(){var s=e(),r=a[s.type];return r.servletName}function m(){var r=e();return(a[r.trackingType]||a[r.type]).servletName}function i(){var r=e();return r.trackingType||r.type}function h(){return e().hasDates}function g(){return e().geoId}function l(){return e().type}return{updateType:j,getContextualUrl:q,getContextualServletName:p,getTrackingServletName:m,getTrackingType:i,isDated:h,getGeoId:g,getType:l}});
define("popunder/contextual-provider",["vanillajs","ta","ta/Core/TA.Event","popunder/context-manager","popunder/context-store","popunder/utils"],function(d,h,j,a,b,o){var l={};var f=false;function e(r){var s=l[r];return s?s.priority:undefined}function m(r){var s=l[r];return s?s.behaviour:undefined}function c(s){var r;for(r in l){if(!l.hasOwnProperty(r)){continue}s(r)}}function n(s){var r=null;c(function(t){var v=b[t],u=e(t),x=m(t),w=e(r);if(v.isActive()&&(x==="INCLUDE"||(s&&x==="TRACK"))&&(w===undefined||u>=w)){r=t}});return r||"DEFAULT"}function g(u){var x=a.getType(),t=a.getTrackingType(),y=n(),v=n(true),s=e(x),r=e(y);u=u||{};u.trackingType=(e(v)>=e(t))?v:t;var w=(!x||s===undefined||r>s)?y:x;a.updateType(w,u)}function i(){var r=f?((screen&&screen.height*0.9)||796):696;var t=668;var s=o.getWindowInfo().height;r=Math.max(r,t);if(s>t){r=Math.min(r,s)}return{size:{width:1040,height:r},url:"/PriceFinderPopunder"}}function p(){return a.getTrackingServletName()}function k(){c(function(r){b[r].on("activate",g).init()})}function q(s,r){l=s;f=r;k();g();if(h.page&&h.page.usingUnifiedDates){h.page.on("dateSelected",function(u,t){if(t==="STAYDATES"){setTimeout(g,5000)}})}else{j.on("newInlinePageDates",function(){setTimeout(g,5000)});j.on("onHACUpdateComplete",function(){setTimeout(g,5000)})}}return{init:q,getContentInfo:i,getTrackingServletName:p}});
