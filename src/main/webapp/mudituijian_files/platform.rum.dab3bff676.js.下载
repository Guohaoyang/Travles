define("@ta/platform.rum",["@ta/common.global"],function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./packages/platform/rum/rum.jsx")}({"./node_modules/react-redux/es/index.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react-redux/es/index.js")},"./node_modules/react/index.js":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./node_modules/react/index.js")},"./node_modules/tti-polyfill/tti-polyfill.js":function(e,t,n){(function(n){var r;!function(){var o="undefined"!=typeof window&&window===this?this:void 0!==n&&null!=n?n:this,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function a(){a=function(){},o.Symbol||(o.Symbol=s)}var u=0;function s(e){return"jscomp_symbol_"+(e||"")+u++}function c(){a();var e=o.Symbol.iterator;e||(e=o.Symbol.iterator=o.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&i(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return f(this)}}),c=function(){}}function f(e){var t=0;return function(e){return c(),(e={next:e})[o.Symbol.iterator]=function(){return this},e}(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}function l(e){c();var t=e[Symbol.iterator];return t?t.call(e):f(e)}function d(e){if(!(e instanceof Array)){e=l(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var p=0;var m="img script iframe link audio video source".split(" ");function y(e,t){for(var n=(e=l(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||y(n.children,t))return!0;return!1}function v(e,t){if(2<e.length)return performance.now();for(var n=[],r=(t=l(t)).next();!r.done;r=t.next())r=r.value,n.push({timestamp:r.start,type:"requestStart"}),n.push({timestamp:r.end,type:"requestEnd"});for(r=(t=l(e)).next();!r.done;r=t.next())n.push({timestamp:r.value,type:"requestStart"});for(n.sort(function(e,t){return e.timestamp-t.timestamp}),e=e.length,t=n.length-1;0<=t;t--)switch(r=n[t],r.type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return r.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function h(e){e=e||{},this.w=!!e.useMutationObserver,this.u=e.minValue||null,e=window.__tti&&window.__tti.e;var t=window.__tti&&window.__tti.o;this.a=e?e.map(function(e){return{start:e.startTime,end:e.startTime+e.duration}}):[],t&&t.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,function(e,t){var n=XMLHttpRequest.prototype.send,r=p++;XMLHttpRequest.prototype.send=function(o){for(var i=[],a=0;a<arguments.length;++a)i[a-0]=arguments[a];var u=this;return e(r),this.addEventListener("readystatechange",function(){4===u.readyState&&t(r)}),n.apply(this,i)}}(this.m.bind(this),this.l.bind(this)),function(e,t){var n=fetch;fetch=function(r){for(var o=[],i=0;i<arguments.length;++i)o[i-0]=arguments[i];return new Promise(function(r,i){var a=p++;e(a),n.apply(null,[].concat(d(o))).then(function(e){t(a),r(e)},function(e){t(e),i(e)})})}}(this.m.bind(this),this.l.bind(this)),function(e){e.c=new PerformanceObserver(function(t){for(var n=(t=l(t.getEntries())).next();!n.done;n=t.next())if("resource"===(n=n.value).entryType&&(e.b.push({start:n.fetchStart,end:n.responseEnd}),b(e,v(e.g,e.b)+5e3)),"longtask"===n.entryType){var r=n.startTime+n.duration;e.a.push({start:n.startTime,end:r}),b(e,r+5e3)}}),e.c.observe({entryTypes:["longtask","resource"]})}(this),this.w&&(this.h=function(e){var t=new MutationObserver(function(t){for(var n=(t=l(t)).next();!n.done;n=t.next())"childList"==(n=n.value).type&&y(n.addedNodes,m)?e(n):"attributes"==n.type&&m.includes(n.target.tagName.toLowerCase())&&e(n)});return t.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t}(this.B.bind(this)))}function g(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=v(e.g,e.b);b(e,Math.max(n+5e3,t))}function b(e,t){!e.i||e.v>t||(clearTimeout(e.j),e.j=setTimeout(function(){var t=performance.timing.navigationStart,n=v(e.g,e.b);t=(window.a&&window.a.A?1e3*window.a.A().C-t:0)||performance.timing.domContentLoadedEventEnd-t;if(e.u)var r=e.u;else performance.timing.domContentLoadedEventEnd?r=(r=performance.timing).domContentLoadedEventEnd-r.navigationStart:r=null;var o=performance.now();null===r&&b(e,Math.max(n+5e3,o+1e3));var i=e.a;5e3>o-n?n=null:n=5e3>o-(n=i.length?i[i.length-1].end:t)?null:Math.max(n,r),n&&(e.s(n),clearTimeout(e.j),e.i=!1,e.c&&e.c.disconnect(),e.h&&e.h.disconnect()),b(e,performance.now()+1e3)},t-performance.now()),e.v=t)}h.prototype.getFirstConsistentlyInteractive=function(){var e=this;return new Promise(function(t){e.s=t,"complete"==document.readyState?g(e):window.addEventListener("load",function(){g(e)})})},h.prototype.m=function(e){this.f.set(e,performance.now())},h.prototype.l=function(e){this.f.delete(e)},h.prototype.B=function(){b(this,performance.now()+5e3)},o.Object.defineProperties(h.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(d(this.f.values()))}}});var w={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in window?new h(e).getFirstConsistentlyInteractive():Promise.resolve(null)}};e.exports?e.exports=w:void 0===(r=function(){return w}.apply(t,[]))||(e.exports=r)}()}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./packages/common/features/features.jsx":function(e,t,n){e.exports=n("dll-reference @ta/common.global")("./packages/common/features/features.jsx")},"./packages/platform/rum/rum.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js"),i=n("./packages/common/features/features.jsx"),a=n("./node_modules/tti-polyfill/tti-polyfill.js"),u=n.n(a);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=new Set(["time-to-interactive","first-paint","first-contentful-paint","load"]),y=function(e,t){var n=t.filter(function(e){if("resource"===e.entryType){if(Object(i.featureIsEnabled)("web_performance_rum_resource_logging")){if(e.name.includes("components/dist"))return!0;if(Object(i.featureIsEnabled)("web_performance_rum_media_logging")&&((t=e.name).includes("media-cdn.tripadvisor.com/media/")||t.includes("video-direct-tacdn-com.global.ssl.fastly.net/media/")||t.includes("static.tacdn.com/img2/")))return!0}return!1}var t;return m.has(e.name)||"measure"===e.entryType&&e.name.startsWith("ðŸ‘·")||"navigation"===e.entryType});return n.length>0?n.map(function(t){return"navigation"===t.entryType?function(e,t){return{puid:e,name:t.name,dns:Math.round(t.domainLookupEnd-t.domainLookupStart),ttfb:Math.round(t.responseStart-t.requestStart),download:Math.round(t.responseEnd-t.responseStart),size:t.transferSize}}(e,t):"resource"===t.entryType?function(e,t){return{puid:e,name:t.name.substring(t.name.indexOf("/","https://".length)),initiator:t.initiatorType,blocked:Math.round(t.requestStart-t.connectEnd),ttfb:Math.round(t.responseStart-t.requestStart),download:Math.round(t.responseEnd-t.responseStart),size:t.transferSize,start:Math.round(t.startTime)}}(e,t):function(e,t){return{puid:e,name:t.name,type:t.entryType,start:Math.round(t.startTime),duration:Math.round(t.duration)}}(e,t)}):[]},v=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return r=this,o=(e=f(t)).call.apply(e,[this].concat(a)),p(d(d(n=!o||"object"!==s(o)&&"function"!=typeof o?d(r):o)),"state",{pageLoad:null,navigations:[],resources:[],timings:[]}),p(d(d(n)),"addEntriesToBuffer",function(e){var t=y(n.props.uid,e);window.performance&&window.performance.clearResourceTimings&&window.performance.clearResourceTimings(),t.length>0&&n.setState(function(e){return{navigations:e.navigations.concat(t.filter(function(e){return"dns"in e})),resources:e.resources.concat(t.filter(function(e){return"initiator"in e})),timings:e.timings.concat(t.filter(function(e){return"duration"in e}))}})}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;this.setState({pageLoad:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}({},this.props,{user_agent:window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"unknown",connection_type:window.navigator&&window.navigator.connection&&window.navigator.connection.effectiveType?window.navigator.connection.effectiveType:"unknown"})}),window.performance&&window.performance.getEntries&&this.addEntriesToBuffer(window.performance.getEntries());var t=null;"undefined"!=typeof PerformanceObserver&&(t=new PerformanceObserver(function(t){e.addEntriesToBuffer(t.getEntries())})).observe({entryTypes:["paint","resource","mark","measure"]}),u.a.getFirstConsistentlyInteractive({}).then(function(e){e&&window.performance&&window.performance.mark&&(window.performance.mark("time-to-interactive"),null!==t&&t.disconnect())}),window.navigator&&window.navigator.sendBeacon&&window.addEventListener("unload",function(){window.navigator.sendBeacon("/data/1.0/rum",JSON.stringify(e.state))},!1)}},{key:"render",value:function(){return null}}])&&c(n.prototype,o),i&&c(n,i),t}();t.default=Object(o.connect)(function(e){return{uid:e.tracking.uid,page:e.route.page,locale:e.i18n.locale,revision:"".concat(e.tracking.vcsBranch,"|").concat(e.tracking.vcsRevision),is_logged_in:e.auth.isMember,viewport_category:e.meta.device.viewportCategory,is_webview:e.meta.isNativeWebview}},{})(v)},"dll-reference @ta/common.global":function(t,n){t.exports=e}})});
//# sourceMappingURL=platform.rum.dab3bff676.js.map